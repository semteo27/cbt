<!-- Created: 2026-01-03 15:30 -->
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>문제 추가 - CBT 시스템</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>새 문제 추가</h1>
            <nav>
                <a href="{{ url_for('admin') }}" class="btn btn-small">문제 관리</a>
                <a href="{{ url_for('index') }}" class="btn btn-small">홈으로</a>
            </nav>
        </header>

        <main class="form-content">
            <form method="POST" enctype="multipart/form-data" class="question-form">
                <div class="form-group">
                    <label for="question_text">문제 *</label>
                    <textarea id="question_text" name="question_text" rows="4" required placeholder="문제를 입력하세요"></textarea>
                </div>

                <div class="form-group">
                    <label for="question_image">문제 이미지</label>
                    <input type="file" id="question_image" name="question_image" accept="image/*">
                    <small>문제에 이미지를 추가할 수 있습니다 (선택사항, PNG, JPG, JPEG, GIF, 최대 16MB)</small>
                </div>

                <div class="option-section">
                    <div class="form-group">
                        <label for="option_a">보기 A *</label>
                        <input type="text" id="option_a" name="option_a" required placeholder="첫 번째 보기">
                        <label for="option_a_image" class="image-label">보기 A 이미지</label>
                        <input type="file" id="option_a_image" name="option_a_image" accept="image/*">
                    </div>

                    <div class="form-group">
                        <label for="option_b">보기 B *</label>
                        <input type="text" id="option_b" name="option_b" required placeholder="두 번째 보기">
                        <label for="option_b_image" class="image-label">보기 B 이미지</label>
                        <input type="file" id="option_b_image" name="option_b_image" accept="image/*">
                    </div>

                    <div class="form-group">
                        <label for="option_c">보기 C *</label>
                        <input type="text" id="option_c" name="option_c" required placeholder="세 번째 보기">
                        <label for="option_c_image" class="image-label">보기 C 이미지</label>
                        <input type="file" id="option_c_image" name="option_c_image" accept="image/*">
                    </div>

                    <div class="form-group">
                        <label for="option_d">보기 D *</label>
                        <input type="text" id="option_d" name="option_d" required placeholder="네 번째 보기">
                        <label for="option_d_image" class="image-label">보기 D 이미지</label>
                        <input type="file" id="option_d_image" name="option_d_image" accept="image/*">
                    </div>
                </div>

                <div class="form-group">
                    <label for="correct_answer">정답 *</label>
                    <select id="correct_answer" name="correct_answer" required>
                        <option value="">정답 선택</option>
                        <option value="A">A</option>
                        <option value="B">B</option>
                        <option value="C">C</option>
                        <option value="D">D</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="subject_id">과목 *</label>
                    <select id="subject_id" name="subject_id" required>
                        <option value="">과목 선택</option>
                        {% for subject in subjects %}
                        <option value="{{ subject.id }}" {% if default_subject_id == subject.id %}selected{% endif %}>{{ subject.name }}</option>
                        {% endfor %}
                    </select>
                    <small>이 문제가 속할 과목을 선택하세요</small>
                </div>

                <div class="form-group">
                    <label for="exam_set">모의고사 회차 *</label>
                    <select id="exam_set" name="exam_set" required>
                        <option value="1">1회</option>
                        <option value="2">2회</option>
                        <option value="3">3회</option>
                        <option value="4">4회</option>
                        <option value="5">5회</option>
                        <option value="6">6회</option>
                        <option value="7">7회</option>
                        <option value="8">8회</option>
                        <option value="9">9회</option>
                        <option value="10">10회</option>
                        <option value="11">11회</option>
                        <option value="12">12회</option>
                        <option value="13">13회</option>
                        <option value="14">14회</option>
                        <option value="15">15회</option>
                        <option value="16">16회</option>
                        <option value="17">17회</option>
                        <option value="18">18회</option>
                        <option value="19">19회</option>
                        <option value="20">20회</option>
                    </select>
                    <small>이 문제가 속할 모의고사 회차를 선택하세요 (각 회차당 20문제 권장)</small>
                </div>

                <div class="form-group">
                    <label for="explanation">해설</label>
                    <textarea id="explanation" name="explanation" rows="4" placeholder="문제 해설을 입력하세요 (선택사항)"></textarea>
                </div>

                <div class="form-group">
                    <label for="explanation_images">해설 이미지 (최대 5개)</label>
                    <input type="file" id="explanation_images" name="explanation_images" accept="image/*" multiple>
                    <small>최대 5개의 이미지를 선택할 수 있습니다 (PNG, JPG, JPEG, GIF 형식, 각 최대 16MB)</small>
                </div>

                <div class="form-group">
                    <label for="explanation_videos">해설 동영상 (최대 5개)</label>
                    <input type="file" id="explanation_videos" name="explanation_videos" accept="video/*" multiple>
                    <small>최대 5개의 동영상을 선택할 수 있습니다 (MP4, WebM, OGG, MOV, AVI 형식, 각 최대 100MB)</small>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">문제 추가</button>
                    <a href="{{ url_for('admin') }}" class="btn btn-secondary">취소</a>
                </div>
            </form>
        </main>
    </div>

    <script>
        // 해설 이미지 파일 개수 제한 (최대 5개)
        document.getElementById('explanation_images').addEventListener('change', function(e) {
            const files = e.target.files;
            if (files.length > 5) {
                alert('해설 이미지는 최대 5개까지만 선택할 수 있습니다.');
                e.target.value = ''; // 선택 취소
            }
        });

        // 해설 동영상 파일 개수 제한 (최대 5개)
        document.getElementById('explanation_videos').addEventListener('change', function(e) {
            const files = e.target.files;
            if (files.length > 5) {
                alert('해설 동영상은 최대 5개까지만 선택할 수 있습니다.');
                e.target.value = ''; // 선택 취소
            }
        });
    </script>
</body>
</html>
